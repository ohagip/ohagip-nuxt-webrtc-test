(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{189:function(e,t,n){var content=n(193);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(74).default)("103b261f",content,!0,{sourceMap:!1})},192:function(e,t,n){"use strict";var r=n(189);n.n(r).a},193:function(e,t,n){(t=n(73)(!1)).push([e.i,".wrap[data-v-50b3bf33]{margin:64px auto;width:640px;max-width:100%}.title[data-v-50b3bf33]{font-size:24px}.subTitle[data-v-50b3bf33],.title[data-v-50b3bf33]{margin:64px 0 0;text-align:center;font-weight:700}.subTitle[data-v-50b3bf33]{font-size:16px}.note[data-v-50b3bf33]{margin:16px 0 0;font-size:14px;line-height:1.3}.log[data-v-50b3bf33]{margin:24px 0 0}.log-body[data-v-50b3bf33]{overflow-y:scroll;margin:8px 0 0;padding:8px;width:100%;height:160px;background-color:#000;font-size:16px;line-height:1.33;color:#fff}.log-list[data-v-50b3bf33]{padding:0;list-style:none}.log-item[data-v-50b3bf33]{font-size:16px}.action[data-v-50b3bf33]{margin:24px 0 0}.action-item[data-v-50b3bf33]{display:inline-block;cursor:pointer}.action-item+.action-item[data-v-50b3bf33]{margin-left:16px}.video[data-v-50b3bf33]{margin:8px 0 0;background-color:#ccc}.video-media[data-v-50b3bf33]{width:100%;height:auto}",""]),e.exports=t},198:function(e,t,n){"use strict";n.r(t);n(48),n(35),n(36),n(32),n(38),n(33);var r=n(6),c=n(1),o=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return n=e.sent,console.log("getConnectedDevices",n),e.abrupt("return",n.filter((function(e){return e.kind===t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=c.a.extend({data:function(){return{devicechangeLog:[],videoDevices:[],audioDevices:[],videoStream:null}},mounted:function(){this.setDeviceChangeEvent()},destroyed:function(){this.removeDeviceChangeEvent()},methods:{setDeviceChangeEvent:function(){navigator.mediaDevices.addEventListener("devicechange",this.updateDeviceList)},removeDeviceChangeEvent:function(){navigator.mediaDevices.removeEventListener("devicechange",this.updateDeviceList)},updateDeviceList:function(e){console.log(e),this.devicechangeLog.push(e.timeStamp)},startUserMedia:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={video:!0,audio:!0},t.prev=1,t.next=4,o(n);case 4:e.videoStream=t.sent,r=e.$refs.video,console.log(e.videoStream),console.log(r),r.srcObject=e.videoStream,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0,t.t0.name);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},stopUserMedia:function(){null!==this.videoStream&&this.videoStream.getTracks().forEach((function(track){track.stop()}));var e=this.$refs.video;e.srcObject=null,e.onloadedmetadata=null},getVideoDevices:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("videoinput");case 3:n=t.sent,console.log(n),e.videoDevices=n.map((function(e){return{label:e.label,deviceId:e.deviceId}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0,t.t0.name);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getAudioDevices:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("audioinput");case 3:n=t.sent,console.log(n),e.audioDevices=n.map((function(e){return{label:e.label,deviceId:e.deviceId}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0,t.t0.name);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),d=(n(192),n(29)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"title"},[e._v("MediaDevices")]),e._v(" "),n("div",{staticClass:"subTitle"},[e._v("MediaDevices: devicechange event")]),e._v(" "),n("div",{staticClass:"log"},[n("div",{staticClass:"log-title"},[e._v("log（event.timeStamp）")]),e._v(" "),n("div",{staticClass:"log-body"},e._l(e.devicechangeLog,(function(t,r){return n("ul",{staticClass:"log-list"},[n("li",{staticClass:"log-item"},[e._v(e._s(t))])])})),0)]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"subTitle"},[e._v("MediaDevices.getUserMedia()")]),e._v(" "),n("div",{staticClass:"action"},[n("div",{staticClass:"action-list"},[n("div",{staticClass:"action-item",on:{click:e.startUserMedia}},[e._v("start")]),e._v(" "),n("div",{staticClass:"action-item",on:{click:e.stopUserMedia}},[e._v("stop")])])]),e._v(" "),n("div",{staticClass:"video"},[n("video",{ref:"video",staticClass:"video-media",attrs:{autoplay:"",playsinline:""}})]),e._v(" "),n("div",{staticClass:"subTitle"},[e._v("MediaDevices.enumerateDevices()")]),e._v(" "),n("div",{staticClass:"action"},[n("div",{staticClass:"action-list"},[n("div",{staticClass:"action-item",on:{click:e.getVideoDevices}},[e._v("getVideoDevices")]),e._v(" "),n("div",{staticClass:"action-item",on:{click:e.getAudioDevices}},[e._v("getAudioDevices")])])]),e._v(" "),n("div",{staticClass:"log"},[n("div",{staticClass:"log-title"},[e._v("video")]),e._v(" "),n("div",{staticClass:"log-body"},e._l(e.videoDevices,(function(t,r){return n("ul",{staticClass:"log-list"},[n("li",{staticClass:"log-item"},[e._v("\n          "+e._s(t.label)),n("br"),e._v("\n          └ "+e._s(t.deviceId)+"\n        ")])])})),0)]),e._v(" "),n("div",{staticClass:"log"},[n("div",{staticClass:"log-title"},[e._v("audio")]),e._v(" "),n("div",{staticClass:"log-body"},e._l(e.audioDevices,(function(t,r){return n("ul",{staticClass:"log-list"},[n("li",{staticClass:"log-item"},[e._v("\n          "+e._s(t.label)),n("br"),e._v("\n          └ "+e._s(t.deviceId)+"\n        ")])])})),0)]),e._v(" "),e._m(1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"note"},[this._v("\n    Safari対応してない、要ブラウザチェック"),t("br"),this._v("\n    Chromeでイベントが複数回飛ぶ、要挙動チェック\n  ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"note"},[this._v("\n    デバイスのアクセス許可をしていないとき、"),t("br"),this._v("\n    エラーは起きないがデバイスのlabel, deviceIdが空文字になっている"),t("br"),this._v("\n    また、USBで接続しているWebCamは含まれない"),t("br"),this._v("\n    一旦Mac Chromeのみ確認\n  ")])}],!1,null,"50b3bf33",null);t.default=component.exports}}]);